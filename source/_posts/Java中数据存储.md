---
title: Java中的数据存储
date: 2018-04-05 12:41:10
tags:
	- Jase
---

### 0x01、Java中数据存储的位置

​	1、**寄存器**：最快的存储区, 由编译器根据需求进行分配,我们在程序中无法控制. 

​	2、    **栈**：存放`基本类型的变量数据`和`对象的引用`，但对象本身不存放在栈中，而是存放在堆（new 出来的对象）或者常量池中（字符串常量对象存放在常量池中。） <!--more-->

​	3、**堆**：存放所有new出来的对象。 

​	4、**静态域**：存放静态成员（static定义的） 

​	5、**常量池**：存放字符串常量和基本类型常量（public static final）。 

​	6、**非RAM存储**：硬盘等永久存储空间

### 0x02、数据共享和垃圾回收

​	**数据共享**：栈和常量池中的对象可以共享，堆中的对象不可以共享

​	**垃圾回收**：栈中的数据大小和生命周期可以确定，当没有引用指向时，这个数据消失。堆中的对象由垃圾回收器负责回收。

​		

### 0x03、基础数据类型、引用数据类型、局部变量和成员变量的存储

- **字符串**：对象引用存在栈，编译时`s = "abc"`确定的存在常量池，运行时`new String("abc")`确定的存储在堆。
- **基础数据类型**：变量和引用都存储在栈中，常量存储在常量池中。
- **局部变量**：存储在栈中，随着方法的消失而消失。
- **成员变量**：存储在堆中，由垃圾回收器负责回收。



### Q&A：	

```
Q：equals 和 == 的区别
A：equals比较的是栈中存放对象的地址，判断是否为同一个对象， == 比较的是两个对象的值是否相等。
```
